(this["webpackJsonpcityspire-d-fe"]=this["webpackJsonpcityspire-d-fe"]||[]).push([[0],{111:function(e,t,a){},135:function(e,t,a){e.exports=a(292)},248:function(e,t,a){},253:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},291:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),u=a(10),i=a(9),o=a(14),s="/cityspire-d-fe",m="/cityspire-d-fe/login",f="/cityspire-d-fe/map",p="/cityspire-d-fe/home",d={issuer:"https://dev-86711607.okta.com/oauth2/default",redirectUri:"".concat(window.location.origin).concat("/cityspire-d-fe/implicit/callback"),clientId:"0oaak0g2snT4S5XQ85d6",pkce:!0,disableHttpsCheck:Object({NODE_ENV:"production",PUBLIC_URL:"/cityspire-d-fe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_CLIENT_ID:"0oaak0g2snT4S5XQ85d6",REACT_APP_OKTA_ISSUER_URI:"https://dev-86711607.okta.com/oauth2/default",REACT_APP_API_URI:"http://localhost:8005",REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1Ijoic2plcmVtaWNoMjMiLCJhIjoiY2trZGh4dndqMDJ4cDJwcXNhM2J2bzQzdCJ9.GZHp89RM-nZzB99Udl-cMQ"}).OKTA_TESTING_DISABLEHTTPSCHECK||!1,scopes:["openid","email","profile"]},v=a(15),E=a.n(v),h=a(29),b=a(49),g=a.n(b),O=function(e){return r.a.createElement("div",null,e.data.map((function(e){return r.a.createElement("figure",{key:e.id},r.a.createElement("img",{src:e.thumbnailUrl,alt:e.title}),r.a.createElement("figcaption",null,r.a.createElement("h3",null,e.title)))})))},S=a(7),k=function(e){var t=e.LoadingComponent,a=e.RenderItems,c=e.getItemsData,l=e.fetchResults,u=Object(n.useState)([]),i=Object(S.a)(u,2),o=i[0],s=i[1],m=Object(n.useState)(!0),f=Object(S.a)(m,2),p=f[0],d=f[1];return Object(n.useEffect)((function(){c().then((function(e){s(e)})).catch((function(e){console.error(e)})).finally((function(){d(!1)}))}),[c]),p?r.a.createElement(t,null):r.a.createElement(a,{data:o,fetchResults:l})};var j=function(e){var t=e.message;return r.a.createElement("div",null,t)},y=function(e){return r.a.createElement("button",{onClick:e.handleClick,disabled:e.isDisabled,className:e.classType||"primary"},e.buttonText)},C=function(){var e=function(){var e=Object(h.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()("https://jsonplaceholder.typicode.com/photos?albumId=1");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(k,{getItemsData:e,LoadingComponent:function(){return r.a.createElement("div",null,"Loading Items...")},RenderItems:O})};a(111);var N=function(e){var t=e.userLocations,a=e.locations,n=e.isShown,c=e.setIsShown;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"favorite"},t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("h3",{className:"cities",onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},e.city),n&&r.a.createElement("div",{className:"data"},a.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("div",null,r.a.createElement("h4",null,"Crime"),r.a.createElement("p",null,e.crime_data)),r.a.createElement("div",null,r.a.createElement("h4",null,"Population"),r.a.createElement("p",null,e.population)),r.a.createElement("div",null,r.a.createElement("h4",null,"Cost of Living"),r.a.createElement("p",null,e.cost_of_living)),r.a.createElement("div",null,r.a.createElement("h4",null,"Rental Rates"),r.a.createElement("p",null,e.rental_rates)),r.a.createElement("div",null,r.a.createElement("h4",null,"Walk Rate"),r.a.createElement("p",null,e.walk_score)))}))))}))):r.a.createElement("div",null,"Fetching Info..."))},w=function(){var e=Object(h.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("No URL provided");case 2:return e.prev=2,e.next=5,P.get(t);case 5:return a=e.sent,e.abrupt("return",a.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return","fetchData Error: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e){if(!e.isAuthenticated)throw new Error("Not authenticated");return{Authorization:"Bearer ".concat(e.idToken)}},I=function(){var e=Object(h.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=A(a),t){e.next=3;break}throw new Error("No URL provided");case 3:return e.prev=3,e.next=6,P.get(t,{headers:n});case 6:return r=e.sent,e.abrupt("return",r.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return","fetchAuthData Error: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,a){return e.apply(this,arguments)}}();function L(e,t,a,n){return R.apply(this,arguments)}function R(){return(R=Object(h.a)(E.a.mark((function e(t,a,n,r){var c,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.isAuthenticated;case 2:if((c=e.sent)!==t.isAuthenticated){e.next=11;break}if(!c||n){e.next=9;break}return e.next=7,a.getUser();case 7:l=e.sent,r(l);case 9:e.next=12;break;case 11:return e.abrupt("return",r(null));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.get().then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=g.a.create({baseURL:"".concat("http://localhost:8005")}),P=g.a.create({baseURL:"https://cityspire-d-be.herokuapp.com"}),_=g.a.create({baseURL:"https://api.allorigins.win/raw?url=https://randomuser.me/api/"}),M=Object(n.createContext)(),D=function(e){var t=Object(n.useState)(null),a=Object(S.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){w("".concat("/cityspire-d-fe/locations")).then((function(e){return l(e)}))}),[]),r.a.createElement(M.Provider,{value:{locations:c}},e.children)},U=function(){var e=Object(n.useState)(null),t=Object(S.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({}),u=Object(S.a)(l,2),i=u[0],s=u[1],m=Object(n.useState)(!0),f=Object(S.a)(m,2),p=f[0],d=f[1],v=Object(n.useState)(!1),E=Object(S.a)(v,2),h=E[0],b=E[1],g=Object(o.useOktaAuth)(),O=g.authState,k=g.authService,j=Object(n.useContext)(M).locations,y=Object(n.useRef)(null);return Object(n.useEffect)((function(){a?null!==a&&a&&(y.current=a.sub,I("".concat("/cityspire-d-fe/userlocations/").concat(y.current),O).then((function(e){return s(e)})).finally((function(){return d(!p)}))):L(O,k,a,c)}),[O,k,a,c]),r.a.createElement(r.a.Fragment,null,!p&&r.a.createElement(N,{userLocations:i,locations:j,isShown:h,setIsShown:b}))};var z=function(e){var t=e.userInfo,a=e.authService;return r.a.createElement("div",null,r.a.createElement("h1",null,"Hi ",t.name," Welcome to Labs Basic SPA"),r.a.createElement("div",null,r.a.createElement("p",null),r.a.createElement("p",null,r.a.createElement(u.Link,{to:"/cityspire-d-fe/profile-list"},"Profiles Example")),r.a.createElement("p",null,r.a.createElement(u.Link,{to:"/cityspire-d-fe/example-list"},"Example List of Items")),r.a.createElement("p",null,r.a.createElement(u.Link,{to:"/cityspire-d-fe/datavis"},"Data Visualizations Example")),r.a.createElement("p",null,r.a.createElement(y,{handleClick:function(){return a.logout()},buttonText:"Logout"}))))};var F=function(e){var t=e.LoadingComponent,a=Object(n.useState)(null),c=Object(S.a)(a,2),l=c[0],u=c[1],i=Object(o.useOktaAuth)(),s=i.authState,m=i.authService;return Object(n.useEffect)((function(){L(s,m,l,u)}),[s,m,l,u]),r.a.createElement(r.a.Fragment,null,s.isAuthenticated&&!l&&r.a.createElement(t,{message:"Fetching user profile..."}),s.isAuthenticated&&l&&r.a.createElement(z,{userInfo:l,authService:m}))},J=(a(112),a(38)),W=a(39);a(248);var B=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"hero-img"},r.a.createElement("div",{className:"search-city-bg"},r.a.createElement("h1",null,"Welcome To CitySpire"),r.a.createElement(u.Link,{to:f},r.a.createElement("div",{className:"search-city-btn-container"},r.a.createElement("span",{className:"fa-icon-container"},r.a.createElement(J.a,{className:"fa-icon",icon:W.b})),r.a.createElement("button",{className:"search-city-btn"},"Search for City"))))),r.a.createElement("section",{className:"hero-container"}))};var H=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null))},K=a(118),V=a(68),Z=a.n(V),G=(a(253),a(254),function(){return Object(n.useEffect)((function(){var e=d.pkce,t=d.issuer,a=d.clientId,n=d.redirectUri,r=d.scopes,c=new K({baseUrl:t?t.split("/oauth2")[0]:"",clientId:a,redirectUri:n,registration:{},features:{registration:!1},logo:Z.a,i18n:{en:{"primaryauth.title":"Welcome to CitySpire, Please sign in"}},authParams:{pkce:e,issuer:t,display:"page",scopes:r}});return c.renderEl({el:"#sign-in-widget"},(function(){}),(function(e){throw e})),function(){return c.remove()}}),[]),r.a.createElement("div",{id:"sign-in-widget",className:"sign-in-widget"})}),Q=a(51),X=a.n(Q),Y=a(119),q=a.n(Y);var $=function(e){var t=e.mapContainerRef;return r.a.createElement("div",null,r.a.createElement("div",{id:"geocoder",className:"geocoder"}),r.a.createElement("div",{className:"map-container",ref:t}))},ee=a(134);var te=function(e){var t=e.locations,a=e.input;return r.a.createElement("div",null,void 0===t?"":r.a.createElement("div",{className:"livability-container"},r.a.createElement("div",{className:"main-score"},r.a.createElement("h1",null,a),r.a.createElement("button",null,r.a.createElement(ee.a,{size:"30px",color:"red"}))),r.a.createElement("div",{className:"sub-scores"},t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("div",null,r.a.createElement("h4",null,"Crime"),r.a.createElement("p",null,e.crime_data)),r.a.createElement("div",null,r.a.createElement("h4",null,"Population"),r.a.createElement("p",null,e.population)),r.a.createElement("div",null,r.a.createElement("h4",null,"Cost of Living"),r.a.createElement("p",null,e.cost_of_living)),r.a.createElement("div",null,r.a.createElement("h4",null,"Rental Rates"),r.a.createElement("p",null,e.rental_rates)),r.a.createElement("div",null,r.a.createElement("h4",null,"Walk Rate"),r.a.createElement("p",null,e.walk_score)))})))))};a(284);var ae=function(e){var t=e.input,a=e.locations;return r.a.createElement(r.a.Fragment,null,null!==a&&t?r.a.createElement(te,{locations:a,input:t}):null)};a(285);X.a.accessToken="pk.eyJ1Ijoic2plcmVtaWNoMjMiLCJhIjoiY2trZGh4dndqMDJ4cDJwcXNhM2J2bzQzdCJ9.GZHp89RM-nZzB99Udl-cMQ";var ne=function(){var e=Object(n.useState)(""),t=Object(S.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(M).locations,u=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=new X.a.Map({container:u.current,style:"mapbox://styles/mapbox/streets-v11",center:[-99,40],zoom:3.3});e.addControl(new X.a.NavigationControl,"bottom-right");var t=new q.a({accessToken:X.a.accessToken,countries:"us",mapboxgl:X.a});return t.on("result",(function(e){c(e.result.text)})),document.getElementById("geocoder").appendChild(t.onAdd(e)),e.resize(),function(){return e.remove()}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement($,{mapContainerRef:u}),r.a.createElement(ae,{input:a,locations:l}))},re=a(120),ce=a.n(re),le={data:[],layout:{},frames:[],config:{displaylogo:!1,displayModeBar:!1}};var ue=function(e){var t=Object(n.useState)(le),a=Object(S.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(null),i=Object(S.a)(u,2),o=(i[0],i[1]);return Object(n.useEffect)((function(){I(e.url,e.authState).then((function(e){l(e)})).catch((function(e){l({data:null,err:e})}))}),[e.url,e.authState]),r.a.createElement(ce.a,{className:"DataViz",data:c.data,layout:c.layout,frames:c.frames,config:c.config,onInitialized:function(e){return o(e)},onUpdate:function(e){return o(e)}})},ie=a(295),oe=[{value:"AL"},{value:"AK"},{value:"AR"},{value:"AZ"},{value:"CA"},{value:"CO"},{value:"CT"},{value:"DC"},{value:"DE"},{value:"FL"},{value:"GA"},{value:"HI"},{value:"IA"},{value:"ID"},{value:"IL"},{value:"IN"},{value:"KS"},{value:"KY"},{value:"LA"},{value:"MA"},{value:"MD"},{value:"ME"},{value:"MI"},{value:"MN"},{value:"MO"},{value:"MS"},{value:"MT"},{value:"NC"},{value:"NE"},{value:"NH"},{value:"NJ"},{value:"NM"},{value:"NV"},{value:"NY"},{value:"ND"},{value:"OH"},{value:"OK"},{value:"OR"},{value:"PA"},{value:"RI"},{value:"SC"},{value:"SD"},{value:"TN"},{value:"TX"},{value:"UT"},{value:"VT"},{value:"VA"},{value:"WA"},{value:"WI"},{value:"WV"},{value:"WY"}],se=ie.a.Option;var me=function(){var e=Object(n.useState)("AL"),t=Object(S.a)(e,2),a=t[0],c=t[1],l=Object(o.useOktaAuth)().authState;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement(ie.a,{type:"select",onChange:function(e){c(e)},placeholder:"Select Your State"},oe.map((function(e){return r.a.createElement(se,{value:e.value,id:e.value},e.value)})))),r.a.createElement(ue,{authState:l,url:"http://localhost:8005/data/viz/"+a}))},fe=function(e){return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(u.Link,{to:s},"Home")),e.data.map((function(e){return r.a.createElement("figure",{key:e.id},r.a.createElement("img",{src:e.avatarUrl,alt:e.name}),r.a.createElement("figcaption",null,r.a.createElement("h3",null,e.name)))})))},pe=function(){var e=Object(o.useOktaAuth)().authState,t=function(e){if(!e.isAuthenticated)throw new Error("Not authenticated");return{Authorization:"Bearer ".concat(e.idToken)}},a=function(){var e=Object(h.a)(E.a.mark((function e(a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=t(a),T.get("/cityspire-d-fe/profiles",{headers:r});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",new Promise((function(){return console.log(e.t0),[]})));case 10:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(k,{getItemsData:function(){return a(e)},LoadingComponent:function(){return r.a.createElement("div",null,"Loading Profiles...")},RenderItems:fe})};var de=function(e){var t=e.authState,a=e.userInfo,n=e.userPic,c=e.logout;return r.a.createElement("nav",null,r.a.createElement(u.Link,{to:s},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:Z.a,alt:"CitySpire"}))),r.a.createElement("div",{className:"button-container"},!t.isPending&&!t.isAuthenticated&&r.a.createElement(u.Link,{to:m},r.a.createElement("button",null,"login")),!t.isPending&&!t.isAuthenticated&&r.a.createElement(u.Link,{to:"#"},r.a.createElement("button",null,"Sign Up")),r.a.createElement(be,{authState:t,userInfo:a,userPic:n,logout:c})))};a(289);function ve(){var e=Object(o.useOktaAuth)(),t=e.authState,a=e.authService,c=Object(n.useState)(null),l=Object(S.a)(c,2),u=l[0],i=l[1],s=Object(n.useState)(""),m=Object(S.a)(s,2),f=m[0],p=m[1],d=function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.logout());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){L(t,a,u,i),x().then((function(e){var t=e.results[0].picture.thumbnail;p(t)}))}),[t,a,u,i]),r.a.createElement("div",null,r.a.createElement(de,{userInfo:u,authState:t,userPic:f,logout:d}))}var Ee=function(e){var t=e.userInfo,a=e.userPic,n=e.logout,c=e.activeClick,l=e.isActive,i=e.dropdownRef;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"menu-container"},r.a.createElement("button",{onClick:c,className:"menu-trigger"},r.a.createElement("span",null,t.name),r.a.createElement("img",{src:a,alt:"user pic",className:"user-pic"})),r.a.createElement("div",{ref:i,className:"menu ".concat(l?"active":"inactive")},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.Link,{to:f,className:"menu-item",onClick:c},r.a.createElement(J.a,{icon:W.b}),"\xa0\xa0 Search City")),r.a.createElement("li",null,r.a.createElement(u.Link,{to:p,className:"menu-item",onClick:c},r.a.createElement(J.a,{icon:W.d}),"\xa0\xa0 Profile")),r.a.createElement("li",null,r.a.createElement(u.Link,{to:"/cityspire-d-fe/favorites",className:"menu-item",onClick:c},r.a.createElement(J.a,{icon:W.a}),"\xa0\xa0 Favorites")),r.a.createElement("li",null,r.a.createElement("div",{className:"menu-item",onClick:n},r.a.createElement(J.a,{icon:W.c}),"\xa0\xa0 Logout"))))):"")},he=function(e,t){var a=Object(n.useState)(t),r=Object(S.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){var t=function(t){null===e.current||e.current.contains(t.target)||l(!c)};return c&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[c,e]),[c,l]};a(290);function be(e){var t=e.authState,a=e.userInfo,c=e.userPic,l=e.logout,u=Object(n.useRef)(null),i=he(u,!1),o=Object(S.a)(i,2),s=o[0],m=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{authState:t,userInfo:a,userPic:c,logout:l,activeClick:function(){return m(!s)},dropdownRef:u,isActive:s}))}var ge=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 Page Not Found"),r.a.createElement(u.Link,{to:s},r.a.createElement("button",null,"Back To Home")))};a(291);function Oe(){var e=Object(i.k)();return r.a.createElement(o.Security,Object.assign({},d,{onAuthRequired:function(){e.push(m)}}),r.a.createElement(ve,null),r.a.createElement(i.g,null,r.a.createElement(i.d,{path:s,exact:!0,component:H}),r.a.createElement(i.d,{path:m,component:G}),r.a.createElement(i.d,{path:f,component:ne}),r.a.createElement(o.SecureRoute,{path:p,component:function(){return r.a.createElement(F,{LoadingComponent:j})}}),r.a.createElement(o.SecureRoute,{path:"/cityspire-d-fe/example-list",component:C}),r.a.createElement(o.SecureRoute,{path:"/cityspire-d-fe/favorites",component:U}),r.a.createElement(o.SecureRoute,{path:"/cityspire-d-fe/profile-list",component:pe}),r.a.createElement(o.SecureRoute,{path:"/cityspire-d-fe/datavis",component:me}),r.a.createElement(i.d,{path:"/cityspire-d-fe/implicit/callback",component:o.LoginCallback}),r.a.createElement(i.d,{component:ge})))}l.a.render(r.a.createElement(n.StrictMode,null,r.a.createElement(u.BrowserRouter,null,r.a.createElement(D,null,r.a.createElement(Oe,null)))),document.getElementById("root"))},68:function(e,t,a){e.exports=a.p+"static/media/cityspire.dc09b532.svg"}},[[135,1,2]]]);
//# sourceMappingURL=main.510cb5b6.chunk.js.map